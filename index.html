<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CatchVoca ëª¨ë°”ì¼ í€´ì¦ˆ - ì–¸ì œ ì–´ë””ì„œë‚˜ ë‹¨ì–´ë¥¼ ë³µìŠµí•˜ì„¸ìš”">
  <title>CatchVoca ëª¨ë°”ì¼ í€´ì¦ˆ</title>
  <link rel="stylesheet" href="style.css">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“š</text></svg>">
</head>
<body>
  <div id="app">
    <!-- Loading State -->
    <div id="loading" class="state-container">
      <div class="emoji">ğŸ“š</div>
      <h2>í€´ì¦ˆ ë¡œë”© ì¤‘...</h2>
      <p class="subtitle">ë‹¨ì–´ì¥ì„ ì¤€ë¹„í•˜ê³  ìˆì–´ìš”</p>
    </div>


    <!-- Login Required State -->
    <div id="login-required" class="state-container" style="display:none;">
      <div class="emoji">ğŸ”’</div>
      <h2>ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h2>
      <p class="subtitle">ëª¨ë°”ì¼ í•™ìŠµì„ ì‹œì‘í•˜ë ¤ë©´ êµ¬ê¸€ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”</p>
      <button id="google-sign-in-btn" class="btn btn-primary" style="margin-top: 20px;">
        ğŸ”‘ êµ¬ê¸€ ë¡œê·¸ì¸
      </button>
    </div>

    <!-- Error State -->
    <div id="error" class="state-container" style="display:none;">
      <div class="emoji">âš ï¸</div>
      <h2>ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤</h2>
      <p id="error-message" class="subtitle"></p>
      <p class="help-text">
        CatchVoca í™•ì¥ í”„ë¡œê·¸ë¨ì—ì„œ ìƒˆ í€´ì¦ˆ ë§í¬ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”.<br>
        <small>ì„¤ì • â†’ ëª¨ë°”ì¼ í€´ì¦ˆ â†’ ë§í¬ ìƒì„±</small>
      </p>
    </div>

    <!-- Quiz Container -->
    <div id="quiz-container" style="display:none;">
      <!-- Header -->
      <div class="header">
        <div class="logo">
          <span class="emoji">ğŸ“š</span>
          <h1>CatchVoca</h1>
        </div>
        <div class="user-info" id="user-info" style="display:none;">
          <img id="user-photo" class="user-photo" alt="User" style="width: 32px; height: 32px; border-radius: 50%; margin-right: 8px;" />
          <span id="user-name" class="user-name" style="margin-right: 12px; font-size: 14px;"></span>
          <button id="sign-out-btn" class="btn-small" style="padding: 4px 12px; font-size: 12px;">ë¡œê·¸ì•„ì›ƒ</button>
        </div>
        <div class="progress">
          <span id="current">1</span> / <span id="total">0</span>
        </div>
      </div>

      <!-- Flashcard -->
      <div class="card">
        <!-- Front Side (Word) -->
        <div class="word-section">
          <h2 id="word-text" class="word-text"></h2>
          <p id="phonetic" class="phonetic"></p>
          <button id="play-audio" class="audio-btn" style="display:none;" title="ë°œìŒ ë“£ê¸°">
            ğŸ”Š ë°œìŒ ë“£ê¸°
          </button>
        </div>

        <!-- Back Side (Definitions) -->
        <div class="definitions-section">
          <button id="show-answer" class="btn btn-primary">
            ëœ» ë³´ê¸°
          </button>

          <div id="answer" class="answer-container" style="display:none;">
            <h3 class="definitions-title">ëœ»</h3>
            <ul id="definitions-list" class="definitions-list"></ul>

            <!-- Rating Buttons -->
            <div class="rating-section">
              <p class="rating-title">ì–¼ë§ˆë‚˜ ì˜ ê¸°ì–µí•˜ì…¨ë‚˜ìš”?</p>
              <div class="rating-buttons">
                <button class="rating-btn rating-again" data-rating="1">
                  <span class="rating-emoji">âŒ</span>
                  <span class="rating-label">ì „í˜€</span>
                </button>
                <button class="rating-btn rating-hard" data-rating="2">
                  <span class="rating-emoji">ğŸ˜“</span>
                  <span class="rating-label">ì–´ë ¤ì›€</span>
                </button>
                <button class="rating-btn rating-good" data-rating="3">
                  <span class="rating-emoji">ğŸ¤”</span>
                  <span class="rating-label">ë³´í†µ</span>
                </button>
                <button class="rating-btn rating-easy" data-rating="4">
                  <span class="rating-emoji">âœ…</span>
                  <span class="rating-label">ì‰¬ì›€</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Navigation Controls -->
      <div class="controls">
        <button id="prev-btn" class="btn btn-secondary" disabled>
          â† ì´ì „
        </button>
        <button id="next-btn" class="btn btn-primary">
          ë‹¤ìŒ â†’
        </button>
      </div>

      <!-- Keyboard Shortcuts Guide -->
      <div class="shortcuts-guide">
        <p>
          <kbd>â†</kbd> <kbd>â†’</kbd> ì´ë™ â€¢
          <kbd>Space</kbd> ëœ» ë³´ê¸°/ìˆ¨ê¸°ê¸°
        </p>
      </div>
    </div>
  </div>

  <!-- Firebase Config -->
  <script src="firebase.config.js"></script>

  <!-- Firebase SDK (CDN) -->
  <script type="module">
    // Firebase ì´ˆê¸°í™”ëŠ” quiz.jsì—ì„œ ìˆ˜í–‰
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
    import { getDatabase, ref, get, set, update } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

    // ì „ì—­ìœ¼ë¡œ export
    window.firebaseModules = {
      initializeApp,
      getDatabase,
      ref,
      get,
      set,
      update,
      getAuth,
      signInWithPopup,
      GoogleAuthProvider,
      onAuthStateChanged,
      signOut
    };
  </script>

  <!-- Authentication Functions -->
  <script src="auth_functions.js"></script>

  <!-- Quiz Logic -->
  <script src="quiz.js"></script>

  <!-- Quiz Initialization Override (with Auth) -->
  <script src="init_override.js"></script>
</body>
</html>
